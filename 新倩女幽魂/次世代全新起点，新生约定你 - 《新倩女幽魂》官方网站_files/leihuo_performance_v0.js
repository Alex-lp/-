!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.leihuo_performance=t():e.leihuo_performance=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./dist/",n(n.s=8)}([function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),u=n(3),c=n(1);function s(e){if(c.paramChecker(e,c.ParamCheckerEnum.NotNullObject,"tableIndexRange",!1),c.paramChecker(e.tableName,c.ParamCheckerEnum.String,"tableIndexRange's",!1),c.paramChecker(e.indexRange,c.ParamCheckerEnum.NotNullObject,"tableIndexRange's indexRange",!0),e.indexRange){var t=e.indexRange,n=t.indexName,r=t.onlyIndex,o=t.lowerIndex,i=t.upperIndex,a=t.lowerExclusive,u=t.upperExclusive;if(c.paramChecker(n,c.ParamCheckerEnum.String,"indexRange's indexName",!1),void 0===r&&void 0===o&&void 0===i)throw new Error("indexRange should have bounds or value for the index");if(void 0!==o&&void 0!==i&&o>=i)throw new Error("lowerIndex should be less than upperIndex");o&&i&&c.paramChecker(a,c.ParamCheckerEnum.Boolean,"indexRange's lowerExclusive",!0),c.paramChecker(u,c.ParamCheckerEnum.Boolean,"indexRange's upperExclusive",!0)}}function l(){try{return a.default(),!0}catch(e){return!1}}t.idbIsSupported=l;var f=function(){function e(e){a.default(),function(e){c.paramChecker(e,c.ParamCheckerEnum.NotNullObject,"dbConfig",!1),c.paramChecker(e.dbName,c.ParamCheckerEnum.String,"dbName",!1),c.paramChecker(e.dbVersion,c.ParamCheckerEnum.NonNegativeInteger,"dbVersion",!0),c.paramChecker(e.itemDuration,c.ParamCheckerEnum.NonNegativeInteger,"itemDuration of dbConfig",!0),c.paramChecker(e.tables,c.ParamCheckerEnum.NotNullObject,"tables",!0),Object.keys(e.tables||{}).forEach((function(t){var n=e.tables[t];c.paramChecker(n.primaryKey,c.ParamCheckerEnum.String,"primaryKey",!0),c.paramChecker(n.itemDuration,c.ParamCheckerEnum.NonNegativeInteger,"itemDuration of table",!0),c.paramChecker(n.indexList,c.ParamCheckerEnum.Array,"indexList",!0),(n.indexList||[]).forEach((function(e){c.paramChecker(e.indexName,c.ParamCheckerEnum.String,"indexName",!1),c.paramChecker(e.unique,c.ParamCheckerEnum.Boolean,"unique",!0)}))}))}(e),this.name=e.dbName,this.version=c.optionWithBackup(e.dbVersion,1),this.tableList=Object.keys(e.tables||{}).map((function(t){return r({tableName:t},e.tables[t])})),this.itemDuration=e.itemDuration}return e.prototype.addItems=function(e){return o(this,void 0,void 0,(function(){var t,n,o=this;return i(this,(function(i){switch(i.label){case 0:return t=function(e,t,n){return void 0!==n?n:void 0!==t?t:e},a=e,s=this.tableList,c.paramChecker(a,c.ParamCheckerEnum.Array,"items",!1),a.forEach((function(e){c.paramChecker(e.tableName,c.ParamCheckerEnum.String,"item's tableName",!1),c.paramChecker(e.itemDuration,c.ParamCheckerEnum.NonNegativeInteger,"item's itemDuration",!0);var t=s.filter((function(t){return t.tableName===e.tableName}))[0];if(!t)throw new Error("Table "+e.tableName+" does not exist");if(void 0!==t.primaryKey&&Object.getOwnPropertyNames(e.item).indexOf(t.primaryKey)<0)throw new Error("primaryKey is needed for item in table "+e.tableName)})),n=e.map((function(e){var n=o.tableList.filter((function(t){return t.tableName===e.tableName}))[0];return r({itemDuration:t(o.itemDuration,n.itemDuration,e.itemDuration)},e)})),[4,u.default.addItems({name:this.name,tableList:this.tableList,version:this.version},n)];case 1:return i.sent(),[2]}var a,s}))}))},e.prototype.getItem=function(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,h(this.name,e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.getItemsInRange=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,p(this.name,e)];case 1:return[2,t.sent()]}}))}))},e.prototype.deleteItemsInRange=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return c.paramChecker(e,c.ParamCheckerEnum.Array,"tableIndexRanges",!1),e.forEach((function(e){s(e)})),[4,u.default.deleteItems(this.name,e)];case 1:return t.sent(),[2]}}))}))},e}();function d(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return a.default(),c.paramChecker(e,c.ParamCheckerEnum.String,"dbName",!1),[4,u.default.deleteDB(e)];case 1:return t.sent(),[2]}}))}))}function h(e,t,n){return o(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return c.paramChecker(e,c.ParamCheckerEnum.String,"dbName",!1),c.paramChecker(t,c.ParamCheckerEnum.String,"tableName",!1),[4,u.default.getItem(e,t,n)];case 1:return[2,r.sent()]}}))}))}function p(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return c.paramChecker(e,c.ParamCheckerEnum.String,"dbName",!1),s(t),[4,u.default.getItemsInRange(e,t)];case 1:return[2,n.sent()]}}))}))}t.CustomDB=f,t.deleteDB=d,t.getItemFromDB=h,t.getItemsInRangeFromDB=p,t.default={idbIsSupported:l,CustomDB:f,deleteDB:d,getItemFromDB:h,getItemsInRangeFromDB:p}},function(e,t,n){"use strict";function r(e){return!isNaN(e)&&e>=0}Object.defineProperty(t,"__esModule",{value:!0}),t.ParamCheckerEnum={NonNegativeInteger:{rule:r,desc:"needs to be a non-negative integer"},NotNullObject:{rule:function(e){return e&&"object"==typeof e},desc:"needs to be a not-null object"},String:{rule:function(e){return"string"==typeof e},desc:"needs to be a string"},Array:{rule:function(e){return e instanceof Array},desc:"needs to be an Array"},Boolean:{rule:function(e){return"boolean"==typeof e},desc:"needs to be a boolean"}},t.isNonNegativeInteger=r,t.optionWithBackup=function(e,t){return void 0!==e?e:t},t.paramChecker=function(e,t,n,r){var o=n+" "+t.desc;if(r){if(void 0!==e&&!t.rule(e))throw new Error(o+" if defined")}else if(!t.rule(e))throw new Error(o)},t.deduplicateList=function(e){return e.reduce((function(e,t){return e.indexOf(t)<0?e.concat(t):e}),[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!window)throw new Error("idb-managed can not run in non-browser environment");for(var e=0,t=["indexedDB","IDBDatabase","IDBObjectStore","IDBTransaction","IDBIndex","IDBCursor","IDBKeyRange","IDBRequest"];e<t.length;e++){var n=t[e];if(!window[n])throw console.log("not sup[port is "+n),new Error(n+" is not supported in window")}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),u=n(4);function c(e){var t=e.onlyIndex,n=e.lowerIndex,r=e.upperIndex,o=e.lowerExclusive,i=void 0!==o&&o,a=e.upperExclusive,u=void 0!==a&&a;return void 0!==t?IDBKeyRange.only(t):void 0!==n&&void 0!==r?IDBKeyRange.bound(n,r,i,u):void 0!==n?IDBKeyRange.lowerBound(n,i):IDBKeyRange.upperBound(r,u)}function s(e){var t,n=Date.now();return r(r({},e.item),((t={}).updateTime=n,t.expireTime=void 0!==e.itemDuration?e.itemDuration+n:-1,t))}function l(e){return e?e.expireTime>0&&e.expireTime<Date.now()?null:(delete e.updateTime,delete e.expireTime,e):null}function f(e){return o(this,void 0,void 0,(function(){var t,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:return[4,p()];case 1:return[4,v(t=i.sent(),"IDB_MANAGER_STORE",e.name)];case 2:return!(n=i.sent())||e.version>n.version?(r=t.transaction("IDB_MANAGER_STORE","readwrite"),o=r.objectStore("IDB_MANAGER_STORE"),a={dbName:e.name,tableList:e.tableList,version:e.version},o.put(s({item:a,tableName:"IDB_MANAGER_STORE"})),[4,r.complete]):[3,4];case 3:i.sent(),t.close(),i.label=4;case 4:return[2]}}))}))}function d(e){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return[4,p()];case 1:return t=r.sent(),n=t.transaction("IDB_MANAGER_STORE","readwrite"),n.objectStore("IDB_MANAGER_STORE").delete(e),[4,n.complete];case 2:return r.sent(),t.close(),[2]}}))}))}function h(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,f(e)];case 1:return t.sent(),[4,u.open(e.name,e.version,(function(t){b(t,e.tableList)}))];case 2:return[2,t.sent()]}}))}))}function p(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,u.open("IDB_MANAGER_DB",1,(function(e){!function(e){e.createObjectStore("IDB_MANAGER_STORE",{keyPath:"dbName"})}(e)}))];case 1:return[2,e.sent()]}}))}))}function m(e){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return[4,p()];case 1:return[4,v(t=r.sent(),"IDB_MANAGER_STORE",e)];case 2:return n=r.sent(),t.close(),n?[4,u.open(n.dbName,n.version,(function(e){b(e,n.tableList||[])}))]:[3,4];case 3:return[2,r.sent()];case 4:return[2,null]}}))}))}function v(e,t,n){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return e.objectStoreNames.contains(t)?(r=e.transaction(t,"readonly"),[4,r.objectStore(t).get(n)]):[3,2];case 1:return[2,l(o.sent())];case 2:return[2,null]}}))}))}function b(e,t){try{t.forEach((function(t){if(e.objectStoreNames.contains(t.tableName)){var n=e.transaction(t.tableName).objectStore(t.tableName);(t.indexList||[]).forEach((function(e){n.indexNames.contains(e.indexName)||n.createIndex(e.indexName,e.indexName,{unique:e.unique})}))}else{var o=t.primaryKey||"id",i=e.createObjectStore(t.tableName,r({keyPath:o},"id"===o?{autoIncrement:!0}:{}));i.createIndex(o,o,{unique:!0}),(t.indexList||[]).forEach((function(e){i.createIndex(e.indexName,e.indexName,{unique:e.unique})})),i.createIndex("updateTime","updateTime",{unique:!1}),i.createIndex("expireTime","expireTime",{unique:!1})}}))}catch(t){e.close()}}function y(e,t,n){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,7,8]),[4,n()];case 1:return o.sent(),[3,8];case 2:r=o.sent();try{e.abort()}catch(e){}o.label=3;case 3:return o.trys.push([3,5,,6]),[4,e.complete];case 4:return o.sent(),[3,6];case 5:throw o.sent(),r;case 6:return[3,8];case 7:return t.close(),[7];case 8:return[2]}}))}))}function w(e,t){return o(this,void 0,void 0,(function(){var n,r,u,s=this;return i(this,(function(l){switch(l.label){case 0:return n=t.filter((function(t){return e.objectStoreNames.contains(t.tableName)})),r=a.deduplicateList(n.map((function(e){return e.tableName}))),[4,y(u=e.transaction(r,"readwrite"),e,(function(){return o(s,void 0,void 0,(function(){var e,t,r,o,a,s,l;return i(this,(function(i){switch(i.label){case 0:e=0,t=n,i.label=1;case 1:return e<t.length?(r=t[e],o=r.tableName,a=r.indexRange,s=u.objectStore(o),a?[3,3]:[4,s.clear()]):[3,8];case 2:return i.sent(),[3,7];case 3:return[4,s.index(a.indexName).openCursor(c(a))];case 4:l=i.sent(),i.label=5;case 5:return l?(s.delete(l.primaryKey),[4,l.continue()]):[3,7];case 6:return l=i.sent(),[3,5];case 7:return e++,[3,1];case 8:return[2]}}))}))}))];case 1:return l.sent(),[2]}}))}))}function g(e,t){return o(this,void 0,void 0,(function(){var n,r,u,c=this;return i(this,(function(l){switch(l.label){case 0:return n=a.deduplicateList(t.map((function(e){return e.tableName}))),[4,I(e.name,n.map((function(e){return{tableName:e,indexRange:{indexName:"expireTime",upperIndex:+new Date,upperExclusive:!1}}})))];case 1:return l.sent(),[4,h(e)];case 2:return r=l.sent(),[4,y(u=r.transaction(n,"readwrite"),r,(function(){return o(c,void 0,void 0,(function(){var e,n,r;return i(this,(function(o){switch(o.label){case 0:e=0,n=t,o.label=1;case 1:return e<n.length?(r=n[e],[4,u.objectStore(r.tableName).put(s(r))]):[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}))];case 3:return l.sent(),[2]}}))}))}function _(e,t,n){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return[4,m(e)];case 1:if(!(r=o.sent()))return[3,7];o.label=2;case 2:return o.trys.push([2,4,5,6]),[4,v(r,t,n)];case 3:return[2,o.sent()];case 4:throw o.sent();case 5:return r.close(),[7];case 6:return[3,8];case 7:return[2,null];case 8:return[2]}}))}))}function x(e,t){return o(this,void 0,void 0,(function(){var n,r,o,a,u,s,f,d,h;return i(this,(function(i){switch(i.label){case 0:return n=t.tableName,r=t.indexRange,[4,m(e)];case 1:if(!(o=i.sent()))return[3,13];i.label=2;case 2:return i.trys.push([2,10,11,12]),a=[],o.objectStoreNames.contains(n)?[3,3]:[3,9];case 3:return u=o.transaction(n,"readonly"),s=u.objectStore(n),r?[3,5]:[4,s.getAll()];case 4:return f=i.sent(),a=(f||[]).map(l).filter((function(e){return null!==e})),[3,9];case 5:return[4,s.index(r.indexName).openCursor(c(r))];case 6:d=i.sent(),i.label=7;case 7:return d?((h=l(d.value))&&a.push(h),[4,d.continue()]):[3,9];case 8:return d=i.sent(),[3,7];case 9:return[2,a];case 10:throw i.sent();case 11:return o.close(),[7];case 12:return[3,14];case 13:return[2,[]];case 14:return[2]}}))}))}function E(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,d(e)];case 1:return t.sent(),[4,u.delete(e)];case 2:return t.sent(),[2]}}))}))}function I(e,t){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,m(e)];case 1:return(n=r.sent())?[4,w(n,t)]:[3,3];case 2:return r.sent(),[3,4];case 3:case 4:return[2]}}))}))}t.addItems=g,t.getItem=_,t.getItemsInRange=x,t.deleteDB=E,t.deleteItems=I,t.default={addItems:g,getItem:_,getItemsInRange:x,deleteDB:E,deleteItems:I}},function(e,t){function n(e){return Array.prototype.slice.call(e)}function r(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function o(e,t,n){var o,i=new Promise((function(i,a){r(o=e[t].apply(e,n)).then(i,a)}));return i.request=o,i}function i(e,t,n){var r=o(e,t,n);return r.then((function(e){if(e)return new f(e,r.request)}))}function a(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return o(this[t],r,arguments)})}))}function c(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function l(e){this._index=e}function f(e,t){this._cursor=e,this._request=t}function d(e){this._store=e}function h(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new h(n)}function m(e){this._db=e}var v;if(d.prototype.createIndex=function(){return new l(this._store.createIndex.apply(this._store,arguments))},d.prototype.index=function(){return new l(this._store.index.apply(this._store,arguments))},h.prototype.objectStore=function(){return new d(this._tx.objectStore.apply(this._tx,arguments))},p.prototype.createObjectStore=function(){return new d(this._db.createObjectStore.apply(this._db,arguments))},m.prototype.transaction=function(){return new h(this._db.transaction.apply(this._db,arguments))},function(){try{return["IDBIndex","IDBCursor","IDBObjectStore","IDBTransaction","IDBDatabase"].forEach((function(e){if(window&&(!window[e]||!window.hasOwnProperty(e)))throw new Error(e)})),!0}catch(e){return!1}}())a(l,"_index",["name","keyPath","multiEntry","unique"]),u(l,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),s(l,"_index",IDBIndex,["openCursor","openKeyCursor"]),a(f,"_cursor",["direction","key","primaryKey","value"]),u(f,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(f.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,n),r(t._request).then((function(e){if(e)return new f(e,t._request)}))}))})})),a(d,"_store",["name","keyPath","indexNames","autoIncrement"]),u(d,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),s(d,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),c(d,"_store",IDBObjectStore,["deleteIndex"]),a(h,"_tx",["objectStoreNames","mode"]),c(h,"_tx",IDBTransaction,["abort"]),a(p,"_db",["name","version","objectStoreNames"]),c(p,"_db",IDBDatabase,["deleteObjectStore","close"]),a(m,"_db",["name","version","objectStoreNames"]),c(m,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[d,l].forEach((function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t=n(arguments),r=t[t.length-1],o=this._store||this._index,i=o[e].apply(o,t.slice(0,-1));i.onsuccess=function(){r(i.result)}})}))})),[l,d].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(o){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():o(r)):o(r)}))}))})})),v={open:function(e,t,n){var r=o(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(e){n&&n(new p(i.result,e.oldVersion,i.transaction))}),r.then((function(e){return new m(e)}))},delete:function(e){return o(indexedDB,"deleteDatabase",[e])}};else{var b="indexedDB is not supported";v={open:function(){return Promise.reject(new Error(b))},delete:function(){return Promise.reject(new Error(b))}}}e.exports=v},function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,u=function(e,t){p[o]=e,p[o+1]=t,2===(o+=2)&&(a?a(m):g())},c="undefined"!=typeof window?window:void 0,s=c||{},l=s.MutationObserver||s.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(m,1)}}var p=new Array(1e3);function m(){for(var e=0;e<o;e+=2)(0,p[e])(p[e+1]),p[e]=void 0,p[e+1]=void 0;o=0}var v,b,y,w,g=void 0;function _(e,t){var n=this,r=new this.constructor(I);void 0===r[E]&&P(r);var o=n._state;if(o){var i=arguments[o-1];u((function(){return j(o,r,i,n._result)}))}else C(n,r,e,t);return r}function x(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(I);return D(t,e),t}f?g=function(){return t.nextTick(m)}:l?(b=0,y=new l(m),w=document.createTextNode(""),y.observe(w,{characterData:!0}),g=function(){w.data=b=++b%2}):d?((v=new MessageChannel).port1.onmessage=m,g=function(){return v.port2.postMessage(0)}):g=void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(m)}:h()}catch(e){return h()}}():h();var E=Math.random().toString(36).substring(2);function I(){}function N(t,n,r){n.constructor===t.constructor&&r===_&&n.constructor.resolve===x?function(e,t){1===t._state?k(e,t._result):2===t._state?B(e,t._result):C(t,void 0,(function(t){return D(e,t)}),(function(t){return B(e,t)}))}(t,n):void 0===r?k(t,n):e(r)?function(e,t,n){u((function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?D(e,n):k(e,n))}),(function(t){r||(r=!0,B(e,t))}),e._label);!r&&o&&(r=!0,B(e,o))}),e)}(t,n,r):k(t,n)}function D(e,t){if(e===t)B(e,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(r=t),null===r||"object"!==o&&"function"!==o)k(e,t);else{var n=void 0;try{n=t.then}catch(t){return void B(e,t)}N(e,t,n)}var r,o}function S(e){e._onerror&&e._onerror(e._result),T(e)}function k(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&u(T,e))}function B(e,t){void 0===e._state&&(e._state=2,e._result=t,u(S,e))}function C(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+1]=n,o[i+2]=r,0===i&&e._state&&u(T,e)}function T(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?j(n,r,o,i):o(i);e._subscribers.length=0}}function j(t,n,r,o){var i=e(r),a=void 0,u=void 0,c=!0;if(i){try{a=r(o)}catch(e){c=!1,u=e}if(n===a)return void B(n,new TypeError("A promises callback cannot return that same promise."))}else a=o;void 0!==n._state||(i&&c?D(n,a):!1===c?B(n,u):1===t?k(n,a):2===t&&B(n,a))}var O=0;function P(e){e[E]=O++,e._state=void 0,e._result=void 0,e._subscribers=[]}var R=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(I),this.promise[E]||P(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&k(this.promise,this._result))):B(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===x){var o=void 0,i=void 0,a=!1;try{o=e.then}catch(e){a=!0,i=e}if(o===_&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===A){var u=new n(I);a?B(u,i):N(u,e,o),this._willSettleAt(u,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===e?B(r,n):this._result[t]=n),0===this._remaining&&k(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},e}(),A=function(){function t(e){this[E]=O++,this._result=this._state=void 0,this._subscribers=[],I!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){D(e,t)}),(function(t){B(e,t)}))}catch(t){B(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return A.prototype.then=_,A.all=function(e){return new R(this,e).promise},A.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},A.resolve=x,A.reject=function(e){var t=new this(I);return B(t,e),t},A._setScheduler=function(e){a=e},A._setAsap=function(e){u=e},A._asap=u,A.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=A},A.Promise=A,A},e.exports=r()}).call(this,n(6),n(7))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,s=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&h())}function h(){if(!l){var e=u(d);l=!0;for(var t=s.length;t;){for(c=s,s=[];++f<t;)c&&c[f].run();f=-1,t=s.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new p(e,t)),1!==s.length||l||u(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r,o,i=n(0);!function(e){e.PERFORMANCE="performance",e.RESOURCE="resource"}(r||(r={})),function(e){e.DB_NOT_SUPPORT="IndexedDB is not supported",e.NO_LOG="No log exists",e.REPORT_LOG_SUCC="Report succ",e.REPORT_LOG_FAIL="Report fail",e.EXCEED_TRY_TIMES="Exceed try times",e.EXCEED_LOG_SIZE_LIMIT="Exceed log size day limit"}(o||(o={}));var a="https://nshssl.hi.163.com/fuxi_hawkeye/api/push",u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},l=7*g,f=function(){function e(e){var t;this.DB=new i.CustomDB({dbName:e||"leihuo_web_db",dbVersion:1,itemDuration:18e6,tables:(t={},t.log_detail_table={indexList:[{indexName:"stage",unique:!1},{indexName:"uuid",unique:!1}]},t)})}return e.prototype.getLogsByStage=function(e){return c(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.DB.getItemsInRange({tableName:"log_detail_table",indexRange:{indexName:"stage",onlyIndex:e}})];case 1:return[2,t.sent()]}}))}))},e.prototype.getAllLogs=function(){return c(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.DB.getItemsInRange({tableName:"log_detail_table"})];case 1:return[2,e.sent()]}}))}))},e.prototype.deleteLogsByStage=function(e){return c(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.DB.deleteItemsInRange([{tableName:"log_detail_table",indexRange:{indexName:"stage",onlyIndex:e}}])];case 1:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return c(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.DB.deleteItemsInRange([{tableName:"log_detail_table"}])];case 1:return e.sent(),[2]}}))}))},e.prototype.addLog=function(e,t){return c(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:if(function(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);t+=o<=127?1:o<=2047?2:o<=65535?3:4}return t}(e.toString())>l)throw new Error(o.EXCEED_LOG_SIZE_LIMIT);return[4,this.DB.addItems([{tableName:"log_detail_table",item:u(u({},e),{stage:t})}])];case 1:return n.sent(),[2]}}))}))},e.idbIsSupported=i.idbIsSupported,e.deleteDB=i.deleteDB,e}(),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function p(e,t){return d(this,void 0,void 0,(function(){return h(this,(function(n){return[2,new Promise((function(n,r){!function(e){if("[object Object]"===String(e)){var t=new XMLHttpRequest;t.open(e.method,e.url,!0);var n=JSON.stringify(e.data);t.setRequestHeader("Content-type","application/json"),t.onreadystatechange=function(){4===t.readyState&&(200===t.status?e.success&&"function"==typeof e.success&&e.success(t.response):e.error&&"function"==typeof e.error&&e.error())},t.send(n)}}({url:e,method:"POST",data:t,success:function(e){n(e)},error:function(e){r(e||new Error("Ajax error"))}})}))]}))}))}var m,v=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},b=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},y=null,w=1,g=1048576;function _(){return v(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:if(!function(){for(var e=0,t=["indexedDB","IDBDatabase","IDBObjectStore","IDBTransaction","IDBIndex","IDBCursor","IDBKeyRange","IDBRequest"];e<t.length;e++){var n=t[e];if(!window[n])return console.log("not support is "+n),!1}return!0}())throw new Error(o.DB_NOT_SUPPORT);return[4,(m=new f).clear()];case 1:return e.sent(),[2]}}))}))}function x(e){return v(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return[4,m.addLog(e,w)];case 1:return t.sent(),y||(y=setTimeout((function(){!function(e){v(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return clearTimeout(y),y=null,e=w,w+=1,[4,m.getLogsByStage(e)];case 1:return E(t.sent(),(function(){m.deleteLogsByStage(e)})),[2]}}))}))}()}),5e3)),[2]}}))}))}function E(e,t){var n=D(e);n.length<1?t&&t():p(a,n).then((function(){t&&t()})).catch((function(e){console.error("上报失败")}))}function I(e,t){return e>0&&t>0&&e-t>0?e-t:1}function N(){return window.location.hostname.split(".").join("-")}function D(e){var t=[];return e.forEach((function(e){delete e.stage,delete e.id,t.push(e)})),t}var S=window.location.href,k=window.location.origin+window.location.pathname;function B(e){return e?e+",url="+k+",page="+S:"url="+k+",page="+S}var C=function(){function e(){}return e.prototype.init=function(){window.addEventListener("error",(function(e){var t=e.target;if(t&&t.src){var n={msg:"file not found",outerHTML:(t||e.srcElement).nodeName,src:t&&t.src,tagName:t&&t.tagName,id:t&&t.id,className:t&&t.className},r="";return Object.keys(n).forEach((function(e){r+=e+"="+n[e]+","})),r=r.replace(/,$/g,""),x({metric:"resourceError",endpoint:N(),timestamp:Date.now(),step:10,value:0,counterType:"GAUGE",tags:B(r)})}return x({metric:"jsError",endpoint:N(),timestamp:Date.now(),step:10,value:0,counterType:"GAUGE",tags:B("msg="+e.error.stack)})}),!0),window.addEventListener("unhandledrejection",(function(e){return x({metric:"jsError",endpoint:N(),timestamp:Date.now(),step:10,value:0,counterType:"GAUGE",tags:B("msg="+e.reason.stack)})}))},e}(),T=function(){function e(){}return e.prototype.init=function(){var e=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance||{};(function(t){var n=null;function r(){e.timing.loadEventEnd?(clearTimeout(n),t(),!0):n=setTimeout(r,100)}"complete"===document.readyState?r():window.addEventListener("load",(function(){r()}),!1)})((function(){x({metric:"common",endpoint:N(),timestamp:Date.now(),step:10,value:0,counterType:"GAUGE",tags:B("uuid="+window.leihuo_uuid+",screenInfo="+(document.body.clientWidth||window.innerWidth)+"_"+(document.body.clientHeight||window.innerHeight))});var t=function(){if(e){var t=e.timing;return{"leihuo_ccc-dns":I(t.domainLookupEnd,t.domainLookupStart),"leihuo_ccc-tcp":I(t.connectEnd,t.connectStart),"leihuo_ccc-receive":I(t.responseEnd,t.responseStart),"leihuo_ccc-request":I(t.responseEnd,t.requestStart),"leihuo_ccc-dom":I(t.domComplete,t.domLoading),"leihuo_ccc-complete-load":I(t.loadEventEnd,t.navigationStart),"leihuo_ccc-dom-ready":I(t.domContentLoadedEventStart,t.navigationStart),"leihuo_ccc-first-Interactive":I(t.domInteractive,t.navigationStart)}}}(),n=e.getEntriesByType("paint"),r=[],o={"first-paint":"leihuo_ccc-first-paint","first-contentful-paint":"leihuo_ccc-first-content"};n.forEach((function(e){switch(e.name){case"first-paint":case"first-contentful-paint":var t={metric:o[e.name],endpoint:N(),timestamp:Date.now(),step:10,value:Number(e.startTime.toFixed(0)),counterType:"GAUGE",tags:B()};r.push(t)}})),Object.keys(t).forEach((function(e){var n={metric:e,endpoint:N(),timestamp:Date.now(),step:10,value:Number(t[e].toFixed(0)),counterType:"GAUGE",tags:B()};r.push(n)}));var i=e.getEntriesByType("resource"),a={metric:"leihuo_ccc-resource",endpoint:N(),timestamp:Date.now(),step:10,value:i.length,counterType:"GAUGE",tags:B()};return r.push(a),E(r)}))},e}(),j=n(5);window.Promise||(window.Promise=j),window.logInitFlag=!1;var O=function(){function e(){var e;window.leihuo_uuid=(e=Date.now(),"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})))}return e.prototype.init=function(){0===S.indexOf("http")&&(window.logInitFlag||(window.logInitFlag=!0,_().then((function(){window.addEventListener("unload",(function(){void 0!==window.navigator.sendBeacon&&function(){return v(this,void 0,void 0,(function(){var e,t;return b(this,(function(n){switch(n.label){case 0:return[4,m.getAllLogs()];case 1:return e=n.sent(),t=D(e),p(a,t).then((function(){})).catch((function(e){console.error(e)})),[2]}}))}))}().then((function(e){}))}),!1),(new T).init(),(new C).init()})).catch((function(e){console.log("******init error*******"),console.log(e.message)}))))},e}();try{var P=new O;window.leihuo_performance=P,P.init()}catch(e){console.log(e.message)}}])}));